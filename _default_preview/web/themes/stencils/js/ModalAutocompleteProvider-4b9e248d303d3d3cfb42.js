/*! For license information please see ModalAutocompleteProvider-4b9e248d303d3d3cfb42.js.LICENSE.txt */
(self.webpackChunkPlug_and_Play_Template=self.webpackChunkPlug_and_Play_Template||[]).push([[0,701],{56078:function(e,t,r){"use strict";r.d(t,{j:function(){return i}});var n=new WeakMap,o=new WeakMap,a={},c=0,s=function(e,t,r){void 0===t&&(t=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e)),void 0===r&&(r="data-aria-hidden");var s=Array.isArray(e)?e:[e];a[r]||(a[r]=new WeakMap);var l=a[r],i=[],u=new Set,d=function(e){e&&!u.has(e)&&(u.add(e),d(e.parentNode))};s.forEach(d);var m=function(e){!e||s.indexOf(e)>=0||Array.prototype.forEach.call(e.children,(function(e){if(u.has(e))m(e);else{var t=e.getAttribute("aria-hidden"),a=null!==t&&"false"!==t,c=(n.get(e)||0)+1,s=(l.get(e)||0)+1;n.set(e,c),l.set(e,s),i.push(e),1===c&&a&&o.set(e,!0),1===s&&e.setAttribute(r,"true"),a||e.setAttribute("aria-hidden","true")}}))};return m(t),u.clear(),c++,function(){i.forEach((function(e){var t=n.get(e)-1,a=l.get(e)-1;n.set(e,t),l.set(e,a),t||(o.has(e)||e.removeAttribute("aria-hidden"),o.delete(e)),a||e.removeAttribute(r)})),--c||(n=new WeakMap,n=new WeakMap,o=new WeakMap,a={})}};const l="undefined"!=typeof document?document:void 0;function i(e="body",{document:t=l}={}){let r,n=t.querySelector(e),o=[],a=new MutationObserver((e=>{for(let t of e)if("childList"===t.type&&t.addedNodes.length>0){let e=Array.from(t.addedNodes).find((e=>{var t;return null===(t=e.querySelector)||void 0===t?void 0:t.call(e,'[aria-modal="true"], [data-ismodal="true"]')}));if(e){o.push(e);let t=e.querySelector('[aria-modal="true"], [data-ismodal="true"]');null==r||r(),r=s(t)}}else if("childList"===t.type&&t.removedNodes.length>0){let e=Array.from(t.removedNodes),n=o.findIndex((t=>e.includes(t)));if(n>=0)if(r(),o=o.filter(((e,t)=>t!==n)),o.length>0){let e=o[o.length-1].querySelector('[aria-modal="true"], [data-ismodal="true"]');r=s(e)}else r=void 0}}));return a.observe(n,{childList:!0}),()=>{null==r||r(),a.disconnect()}}},64945:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});r(33948);var n=r(67294),o=r(45697),a=r.n(o),c=r(27354),s=r(98069);class l{constructor(e){if(!e||0===e.length)throw new Error("At least one adapter is required for AutocompleteService");this.autocompleteAdapters=[],Array.from(e).forEach((e=>{if(!e||!e.hasOwnProperty("autocomplete"))throw new Error("".concat(e.constructor.name," is not implemented yet"));this.registerAdapter(e)}))}registerAdapter(e){this.autocompleteAdapters.push(e)}getResults(e,t){return Promise.all(this.autocompleteAdapters.map((r=>r.getResults(e,t)))).then((e=>{const t=[];let r=0,n=0;return e.map(((e,o)=>{let{data:a}=e;return r+=a.length,t[o]=[],a.length&&a.forEach((e=>{t[o][n++]=e})),t})),{results:t,count:r}})).catch((e=>(console.error(e),{results:0,count:0,error:e})))}}var i=r(48131),u=r(6838),d=r(66004);function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}const p=e=>{let{fetching:t,onSubmit:r,componentId:o}=e;return t?n.createElement("div",{className:"autocomplete-concierge__loader","aria-hidden":"true"},n.createElement("svg",{className:"svg-icon",role:"img",focusable:!1},n.createElement("use",{href:"#spinner"}))):n.createElement("button",{type:"submit",className:"autocomplete-concierge__submit",onClick:r,"aria-labelledby":"".concat(o,"-submit-label")},n.createElement("svg",{className:"svg-icon",role:"img",focusable:!1},n.createElement("title",{id:"".concat(o,"-submit-label")},"Submit search"),n.createElement("use",{href:"#search"})))};function f(e){const{id:t,templates:o,placeholder:a,debounce:l,action:u,method:f,hiddenFields:h,inputAttributes:v,showSubmit:y,onClose:E,showClear:g,showLoader:b}=e,{setSelectedIndex:_,selectedIndex:w,count:C,fetchResults:k,fetching:N}=(0,i.o)(),[S,P]=(0,n.useState)(null),[x,O]=(0,n.useState)(null),[A,j]=(0,n.useState)(null),[T,I]=(0,n.useState)(""),[L,R]=(0,n.useState)(""),[D,q]=(0,n.useState)(!1),[M,U]=(0,n.useState)("autocomplete-concierge__results"),[W,F]=(0,n.useState)(C),K=(0,n.useRef)(),G=(0,n.useRef)(),Y=(0,n.useRef)(null),Z=(0,d.uY)(),[B,Q]=(0,d.S5)(),{keyboardProps:V}=(0,c.v5)({onKeyUp:e=>{let t=-1;if(27===e.keyCode)return j(!1),_(-1),A||E(),void(Y.current&&Y.current.focus());if(40===e.keyCode&&(t=w+1>=C?0:w+1,B[t]&&B[t].scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})),38===e.keyCode&&(t=w-1<0?C-1:w-1,B[t]&&B[t].scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})),13===e.keyCode){if(-1===w)return void O(!0);B[w].click()}_(t),P(t),j(C>0)},onKeyDown:e=>(40===e.keyCode||38===e.keyCode||13===e.keyCode||27===e.keyCode?e.preventDefault():Y.current.focus(),!1)}),{focusWithinProps:z}=(0,c.L_)({onFocusWithin:()=>{j(C>0),q(!0)},onBlurWithin:()=>{j(!1)}});(0,n.useEffect)((()=>{const e=["autocomplete-concierge__results"];N&&!A&&W<C&&(e.push("autocomplete-concierge__results--expanding"),U(e.join(" "))),!N&&A&&W===C&&(e.push("autocomplete-concierge__results--open"),U(e.join(" "))),N||A||(e.push("autocomplete-concierge__results--open"),e.push("autocomplete-concierge__results--collapsing"),U(e.join(" ")))}),[N,W,C,A]),(0,n.useEffect)((()=>{const e=(0,d.jS)(document.location.href,"query");I(e||"")}),[]),(0,n.useEffect)((()=>{if(j(C>0),!T)return;const e=C>0?"".concat(C," results for ").concat(T):"No results found for ".concat(T);R(e),F(C)}),[C,T]),(0,n.useEffect)((()=>{const e=setTimeout((async()=>{""===T&&Y.current.focus(),await k(T,o)}),l);return()=>clearTimeout(e)}),[T]),(0,n.useEffect)((()=>{if(x&&K.current&&Y.current){if(Y.current.value=T,Z){const e={TYPE:"SUBMIT",title:"NEEDS_REFRESH",url:window.location.href,time:Date.now()};return void Z.trackedEventWithCb(e,K.current.submit())}K.current.submit()}}),[x]);const H=(e,t,r)=>{if(Z){const n={TYPE:"CLICK",url:e,query:T,title:t};Z.trackedEventWithCb(n,r)}r&&!Z&&r()},X=(0,n.useCallback)(((e,t)=>{e.preventDefault();const{action:r,action_t:n,title:o}=t;if("Q"===n||void 0===n)return I(r||t),void O(!0);H(r,o,(()=>document.location.href=r))}),[]);return n.createElement("div",m({className:"autocomplete-concierge no-wysiwyg",role:"search"},z),n.createElement("form",{ref:K,action:u,method:f,className:"autocomplete-concierge__form"},n.createElement("label",{className:"sr-only","aria-live":"polite",id:"".concat(t,"-label")},L),b&&n.createElement(p,{fetching:N,onSubmit:()=>O(!0),componentId:t}),n.createElement("input",m({id:"".concat(t,"-inputField"),ref:Y,type:"text",autoComplete:"off",role:"combobox","aria-expanded":D&&A,"aria-haspopup":"grid","aria-labelledby":"".concat(t,"-label"),"aria-autocomplete":"list","aria-controls":"".concat(t,"-grid"),"aria-activedescendant":-1===S?void 0:S,onChange:e=>{let{currentTarget:{value:t}}=e;I(t)},onClick:()=>j(C>0),value:T,placeholder:a,className:"autocomplete-concierge__input",name:"query",onKeyDown:e=>{40===e.keyCode&&G.current.focus()}},v)),h&&h.map((e=>n.createElement("input",{key:e.id,type:"hidden",name:e.name,value:e.value}))),n.createElement("button",{type:"button",className:["autocomplete-concierge__submit",!g||g&&0===T.length?"hidden":""].join(" "),onClick:()=>I(""),onKeyUp:e=>{e.preventDefault(),13===e.keyCode&&I("")}},n.createElement("svg",{className:"svg-icon",role:"img",focusable:!1},n.createElement("title",null,"Clear search"),n.createElement("use",{href:"#close"})),"Clear"),y&&!b&&n.createElement("button",{type:"submit",className:"autocomplete-concierge__submit",onClick:()=>O(!0),"aria-labelledby":"".concat(t,"-submit-label")},n.createElement("svg",{className:"svg-icon",role:"img",focusable:!1},n.createElement("title",{id:"".concat(t,"-submit-label")},"Submit search"),n.createElement("use",{href:"#search"})))),n.createElement("div",m({ref:G,role:"grid","aria-labelledby":"".concat(t,"-label"),"aria-hidden":!A,id:"".concat(t,"-grid"),className:M,tabIndex:-1},V),o&&o.map(((e,t)=>(e=>{const{template:t}=e,o=t.toLowerCase(),a=(0,n.useMemo)((()=>(0,n.lazy)((()=>r(42276)("./".concat(o))))),[]);return n.createElement(n.Suspense,{key:"component-".concat(o),fallback:n.createElement("span",{className:"sr-only"},"Loading template...")},n.createElement(a,e))})({...e,templateId:t,handleClick:X,trackedClick:H,childRefs:Q})))),n.createElement(s.U4,{onDismiss:()=>j(!1)}))}function h(e){const{adapters:t}=e,r=new l(t);return n.createElement(i.g,{initialState:u.E3,reducer:u.fG,autocompleteService:r},n.createElement(f,e))}const{string:v,arrayOf:y,shape:E,number:g,bool:b,func:_}=a();f.propTypes={id:v,templates:y(E({id:v,label:v,template:v,serviceUrl:v,params:v})).isRequired,placeholder:v,debounce:g,action:v,method:v,showSubmit:b,isOpen:b,onClose:_,showClear:b,showLoader:b},f.defaultProps={id:"autocomplete-search",placeholder:"Start your search here...",debounce:500,action:"search.html",method:"GET",showSubmit:!0,isOpen:!1,onClose:()=>{},showClear:!1,showLoader:!1}},52842:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});r(33948);var n=r(67294),o=r(331),a=r(56078),c=r(98069),s=r(11321),l=r(64945);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i.apply(this,arguments)}function u(e){const[t,r]=(0,n.useState)(!1),u=(0,n.useCallback)((()=>{r(!1)}),[]);(0,a.j)();const d=(0,o.Z)(),{adapters:m}=e;return n.createElement(c.N3,{className:"no-wysiwyg autocomplete-wrapper"},n.createElement("button",{type:"button",className:"autocomplete-wrapper__action",onClick:()=>r(!t)},n.createElement("svg",{className:"svg-icon"},n.createElement("title",null,"Search"),n.createElement("use",{href:"#search"}))),t&&n.createElement(s.Z,{titleId:d,className:"autocomplete-modal",onClose:u},n.createElement("header",{className:"autocomplete-modal__header"},n.createElement("button",{type:"button",onClick:u,className:"autocomplete-modal__header-close"},n.createElement("svg",{className:"svg-icon"},n.createElement("title",null,"Close modal"),n.createElement("use",{href:"#close"})))),n.createElement("div",{className:"autocomplete-modal__body"},n.createElement(l.default,i({},e,{adapters:m,onClose:u})))))}},6838:function(e,t,r){"use strict";r.d(t,{E3:function(){return l},Ix:function(){return u},fG:function(){return i}});const n="PNP/AUTOCOMPLETE/UPDATE_RESULTS",o="PNP/AUTOCOMPLETE/SET_SELECTED",a="PNP/AUTOCOMPLETE/LOAD_REQUEST",c="PNP/AUTOCOMPLETE/LOAD_FAILED",s="PNP/AUTOCOMPLETE/LOAD_SUCCESS",l={results:[],count:0,query:"",selectedIndex:-1,fetching:!1,error:""},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return{...e,fetching:!0};case c:return{...e,error:t.error,fetching:!1};case s:return{...e,fetching:!1};case n:return{...e,results:t.results,count:t.count,query:t.query,selectedIndex:-1};case o:return{...e,selectedIndex:t.selectedIndex};default:return{...e}}},u=(e,t)=>({updateResults:(t,r)=>{e({type:n,results:t,count:r})},setSelectedIndex:t=>{e({type:o,selectedIndex:t})},fetchResults:async r=>{if(!r)return void e({type:n,results:[],count:0});e({type:a});const{results:o,count:l,error:i}=await t.getResults(r);if(i)return console.error("There was an error fetching results from the service."),console.info(i.message),e({type:n,results:[],count:0}),void e({type:c,error:i.message});e({type:n,results:o,count:l,query:r}),e({type:s})}})},48131:function(e,t,r){"use strict";r.d(t,{g:function(){return s},o:function(){return c}});r(33948);var n=r(67294),o=r(6838);const a=(0,n.createContext)();a.displayName="PNP-STORE";const c=()=>(0,n.useContext)(a),s=e=>{let{children:t,initialState:r,reducer:c,autocompleteService:s}=e;const[l,i]=(0,n.useReducer)(c,r),u=(0,n.useMemo)((()=>(0,o.Ix)(i,s)),[]);return n.createElement(a.Provider,{value:{...u,dispatch:i,...l}},t)}},11321:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(67294),o=r(98069),a=r(34708),c=r(49641);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}function l(e){let{titleId:t,title:r,onClose:a,children:s,className:l}=e;return n.createElement(o.Xj,null,n.createElement("div",{className:"no-wysiwyg modal-wrapper ".concat(l?"".concat(l,"-wrapper"):"")},n.createElement(c.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},n.createElement(i,{titleId:t,title:r,onClose:a,className:l},s))))}function i(e){let{titleId:t,title:r,onClose:l,children:i,className:u}=e;const d={"aria-describedby":t,title:r,onClose:l,isDismissable:!0,isOpen:!0},m=n.useRef(),p=n.useRef(),f=(0,c.bO)(),{overlayProps:h,underlayProps:v}=(0,o.Ir)(d,p);(0,o.tk)();const{modalProps:y}=(0,o.dd)(),{dialogProps:E,titleProps:g}=(0,a.R)(d,p);return(0,n.useEffect)((()=>{m.current.removeAttribute("hidden"),f.focusFirst()}),[m]),n.createElement("div",s({ref:m},v,{hidden:!0,className:"modal ".concat(u||"")}),n.createElement("div",s({ref:p},h,E,y,{"aria-modal":"true",tabIndex:"-1",className:"modal__content ".concat(u?"".concat(u,"__content"):"")}),t?"":n.createElement("h2",s({},g,{className:"".concat(u?"".concat(u,"__title"):"")}),r),i))}},42276:function(e,t,r){var n={"./cemetery--v15":[98938,938],"./cemetery--v15.jsx":[98938,938],"./cemetery--v16":[97841,841],"./cemetery--v16.jsx":[97841,841],"./faqs--v15":[81524,524],"./faqs--v15.jsx":[81524,524],"./faqs--v16":[20080,80],"./faqs--v16.jsx":[20080,80],"./organic":[44113,113],"./organic.jsx":[44113,113],"./people--v15":[62140,140],"./people--v15.jsx":[62140,140],"./people--v16":[12507,507],"./people--v16.jsx":[12507,507],"./planning_applications--v15":[53298,298],"./planning_applications--v15.jsx":[53298,298],"./planning_applications--v16":[38504,504],"./planning_applications--v16.jsx":[38504,504],"./programs--v15":[86588,588],"./programs--v15.jsx":[86588,588],"./programs--v16":[32723,723],"./programs--v16.jsx":[32723,723],"./roadworks--v15":[75554,554],"./roadworks--v15.jsx":[75554,554],"./roadworks--v16":[54563,563],"./roadworks--v16.jsx":[54563,563],"./services--v15":[91362,362],"./services--v15.jsx":[91362,362],"./services--v16 ":[45542,542],"./services--v16 .jsx":[45542,542]};function o(e){if(!r.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return r.e(t[1]).then((function(){return r(o)}))}o.keys=function(){return Object.keys(n)},o.id=42276,e.exports=o}}]);
//# sourceMappingURL=ModalAutocompleteProvider-4b9e248d303d3d3cfb42.js.map