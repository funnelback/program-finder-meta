/*! For license information please see NotificationSettings-60b68bc3deb61409ec2d.js.LICENSE.txt */
"use strict";(self.webpackChunkPlug_and_Play_Template=self.webpackChunkPlug_and_Play_Template||[]).push([[672],{11321:function(e,t,s){s.d(t,{Z:function(){return r}});var n=s(67294),i=s(98069),a=s(34708),c=s(49641);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},o.apply(this,arguments)}function r(e){let{titleId:t,title:s,onClose:a,children:o,className:r}=e;return n.createElement(i.Xj,null,n.createElement("div",{className:"no-wysiwyg modal-wrapper ".concat(r?"".concat(r,"-wrapper"):"")},n.createElement(c.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},n.createElement(l,{titleId:t,title:s,onClose:a,className:r},o))))}function l(e){let{titleId:t,title:s,onClose:r,children:l,className:u}=e;const d={"aria-describedby":t,title:s,onClose:r,isDismissable:!0,isOpen:!0},m=n.useRef(),f=n.useRef(),p=(0,c.bO)(),{overlayProps:h,underlayProps:g}=(0,i.Ir)(d,f);(0,i.tk)();const{modalProps:b}=(0,i.dd)(),{dialogProps:N,titleProps:_}=(0,a.R)(d,f);return(0,n.useEffect)((()=>{m.current.removeAttribute("hidden"),p.focusFirst()}),[m]),n.createElement("div",o({ref:m},g,{hidden:!0,className:"modal ".concat(u||"")}),n.createElement("div",o({ref:f},h,N,b,{"aria-modal":"true",tabIndex:"-1",className:"modal__content ".concat(u?"".concat(u,"__content"):"")}),t?"":n.createElement("h2",o({},_,{className:"".concat(u?"".concat(u,"__title"):"")}),s),l))}},31142:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});s(33948),s(26699);var n=s(67294),i=s(98069),a=s(45697),c=s.n(a),o=s(331);s(17727);class r{constructor(){this.requests=new Map}debounce(e,t){const s=JSON.stringify(e);if(!this.requests.has(s)){const e=t();e.finally((()=>{this.requests.delete(s)})),this.requests.set(s,e)}return this.requests.get(s)}get(e){return this.requests.get(JSON.stringify(e))}}class l{constructor(e){if(!e)throw new Error("dto is required when instantiating a new UserService");["userAdapter"].forEach((t=>{if(!e[t])throw new Error("".concat(t," property is required when instantiating a new UserService"))})),this.promiseDebouncer=new r,this.userAdapter=e.userAdapter}get(e){return this.promiseDebouncer.debounce({method:"get",userId:e},(()=>this.userAdapter.get(e)))}setAll(e,t){return this.promiseDebouncer.debounce({method:"get",documentId:t},(()=>this.userAdapter.setAll(e,t)))}updateNotifications(e,t){return this.promiseDebouncer.debounce({method:"get",notificationKey:e},(()=>this.userAdapter.updateNotifications(e,t)))}toggleNotifications(e,t){return this.promiseDebouncer.debounce({method:"get",documentId:t},(()=>this.userAdapter.toggleNotifications(e)))}}const u=e=>{let{children:t,userService:s,userId:i}=e;const[a,c]=(0,n.useState)(!1),[o,r]=(0,n.useState)(!1),[l,u]=(0,n.useState)([]);(0,n.useEffect)((()=>{c(!0),s.get(i).then((e=>{u(e),c(!1),r(!0)}))}),[l]);const m=(0,n.useCallback)(((e,t)=>(c(!0),s.setAll(t,e).then((e=>{u(e),c(!1),r(!0)})))),[l]),f=(0,n.useCallback)((e=>(c(!0),s.toggleNotifications(e).then((e=>{u(e),c(!1),r(!0)})))),[l]),p=(0,n.useCallback)((e=>(c(!0),s.updateNotifications(e,l).then((e=>{u(e),c(!1),r(!0)})))),[l]);return n.createElement(d.Provider,{value:{user:l,userService:s,isLoading:a,isReady:o,updateUser:m,updateNotifications:p,toggleNotifications:f}},t)},d=(0,n.createContext)({user:{},userId:null,userService:null,isLoading:!1,isReady:!1,updateUser:()=>{},updateNotifications:()=>{},toggleNotifications:()=>{}});var m=s(11321);function f(e){const{title:t,pushNotificationsLabel:s,fieldsSpec:i}=e,{user:a,isReady:c,isLoading:r,updateUser:l,updateNotifications:u,toggleNotifications:f}=(0,n.useContext)(d),[p,h]=(0,n.useState)(!1),[g,b]=(0,n.useState)(null),[N,_]=(0,n.useState)(!1),[y,E]=(0,n.useState)(!1),w=(0,n.useCallback)((()=>{E(!y)}),[y]),v=(0,o.Z)();(0,n.useEffect)((()=>{b(a)}),[c]),(0,n.useEffect)((()=>{const e=window.navigator.userAgent,t=!!e.match(/iphone/i),s=!!e.match(/crios/i);h(!(t||s))}),[c]);const C=(0,n.useCallback)((async e=>{await u(e),b(a)}),[a]),k=(0,n.useCallback)((async e=>{_(await f(e))}),[a]),S=(0,n.useCallback)((async()=>{await l(g),E(!1)}),[g,N,p]),A=(0,o.Z)();return n.createElement(n.Fragment,null,n.createElement("button",{type:"button",className:"notifications-settings__action",onClick:w},"Notification settings"),y&&n.createElement(m.Z,{onClose:w,titleId:A,className:"notifications-settings-modal"},n.createElement("header",{className:"notifications-settings-modal__header"},n.createElement("h1",{id:A,className:"notifications-settings-modal__title"},t),n.createElement("button",{type:"button",onClick:w,className:"notifications-settings-modal__header-close"},n.createElement("svg",{className:"svg-icon"},n.createElement("title",null,"Close modal"),n.createElement("use",{href:"#close"})))),n.createElement("div",{className:"custom-form notifications-settings notifications-settings__container"},n.createElement("div",{className:"sq-form-question-answer"},n.createElement("ul",null,p&&n.createElement("li",{className:"notifications-settings__switch-item"},n.createElement("div",{className:"notifications-settings__notifications-switch"},n.createElement("svg",{className:"svg-icon notifications-settings__notifications-icon"},n.createElement("use",{href:"#edify-notification"})),n.createElement("h2",{className:"notifications-settings__label"},"Push notifications"),n.createElement("div",{className:"switch"},n.createElement("input",{className:"switch__input",type:"checkbox",id:"switch-input-".concat(v),onChange:k,value:N,disabled:!c,"aria-describedby":"switch-status-".concat(v),"aria-labelledby":"switch-description-".concat(v)}),n.createElement("label",{id:"switch-description-".concat(v),className:"switch__label",htmlFor:"switch-input-".concat(v)},"Toggle push notifications"),n.createElement("div",{className:"switch__marker","aria-hidden":"true"}))),n.createElement("small",{id:"switch-status-".concat(v),className:"notifications-settings__description"}," ",s)),c&&i.map((e=>{let{id:t,label:s,description:i,key:a}=e;const r=(0,o.Z)();return n.createElement("li",{key:t,className:"notifications-settings__switch-item"},n.createElement("input",{type:"checkbox",name:t,id:"".concat(t,"-").concat(r),value:g.excludeNotificationTypes&&g.excludeNotificationTypes.includes(a),disabled:!c,onChange:()=>C(a),className:"sq-form-field","aria-describedby":"".concat(t,"-").concat(r,"-description"),"aria-labelledby":"".concat(t,"-").concat(r,"-label")}),n.createElement("label",{id:"".concat(t,"-").concat(r,"-label"),htmlFor:"".concat(t,"-").concat(r),className:"notifications-settings__label"},s),n.createElement("small",{id:"".concat(t,"-").concat(r,"-description"),className:"notifications-settings__description"},i))})))),n.createElement("footer",{className:"notifications-settings-modal__footer"},n.createElement("button",{className:"notifications-settings-modal__footer-button",type:"button",onClick:S,disabled:r},"Update notifications",n.createElement("span",{className:"sr-only"}," "," Modal will be closed after pressing update"," "))))))}function p(e){const{userAdapter:t,documentId:s}=e,a=new l({userAdapter:t});return n.createElement(i.N3,null,n.createElement(u,{userService:a,userId:s,key:s},n.createElement(f,e)))}const{string:h,number:g,func:b,oneOfType:N,arrayOf:_,shape:y}=c();p.propTypes={title:h,documentId:N([h,g]),onDialogClose:b,pushNotificationsLabel:h,fieldsSpec:_(y({id:h,label:h,description:h,key:h}))},p.defaultProps={title:"Notifications settings",documentId:"666",onDialogClose:()=>{},pushNotificationsLabel:"Most students enable push notifications to stay on top of their studies. This will allow\n    you to receive notifications directly to this device.",fieldsSpec:[{id:"assignment_reminder",label:"Assignment reminder",description:"Remind me about assignments 1 day before their due date.",key:"assignment_reminder"},{id:"canvas_announcement",label:"Course announcements",description:"Announcements related to one of my courses.",key:"canvas_announcement"}]}}}]);
//# sourceMappingURL=NotificationSettings-60b68bc3deb61409ec2d.js.map