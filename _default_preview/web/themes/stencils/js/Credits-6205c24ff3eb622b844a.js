"use strict";(self.webpackChunkPlug_and_Play_Template=self.webpackChunkPlug_and_Play_Template||[]).push([[191],{9556:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var n=a(67294),r=a(331),c=a(56078),l=a(98069),s=a(55125),o=a(2106),i=a(87553);function m(e){let{balances:t,transactions:a,type:r,label:c,lowThreshold:l,showRecentTransactions:s,addCreditLink:o,allTransactionsLink:m,closeModal:d,popover:p}=e;const u=t[r]||"NaN",f=s&&a[r]||[],b=parseFloat(u)<l,g=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});return n.createElement("div",{className:"credit"},n.createElement("div",{className:"credit-balance"},n.createElement("div",{className:"credit-balance__header"},"".concat(c," Balance")," ",p&&n.createElement("button",{className:"credit-balance__header-button",type:"button",onClick:d},n.createElement("span",{className:"sr-only"},"Close"),n.createElement("svg",{className:"credit-balance__header-button-icon"},n.createElement("use",{href:"#close"})))),n.createElement("div",{className:"credit-balance__balance ".concat(b?"credit-balance__balance--low":"")},n.createElement("div",{className:"credit-balance__balance-amount"},g.format(u),b&&n.createElement("div",{className:"credit-balance__balance-amount-low"},n.createElement("svg",{className:"svg-icon svg-icon--small"},n.createElement("title",null,"Warning"),n.createElement("use",{href:"#warning"})),"Low balance")),o&&n.createElement("a",{href:o,className:"credit-balance__balance-add"},n.createElement("svg",{"aria-hidden":!0,className:"svg-icon svg-icon--small"},n.createElement("use",{href:"#add-alt"})),"Add more balance")),s&&f.length>0&&n.createElement("div",{className:"credit-balance__transactions"},n.createElement("ul",{className:"credit-balance__transactions-list"},f.map((e=>{let{id:t,label:a,amount:r,date:c}=e;return n.createElement("li",{key:t,className:"credit-transaction"},n.createElement("div",{className:"credit-transaction__details"},n.createElement("div",{className:"credit-transaction__label"},a),c&&n.createElement("div",{className:"credit-transaction__date"},(0,i.Z)(c,"dd MMM, yyyy, h:mmaaa"))),n.createElement("div",{className:"credit-transaction__amount"},g.format(r)))}))),m&&n.createElement("a",{href:m,className:"credit-balance__all-transactions"},n.createElement("svg",{className:"svg-icon svg-icon--small"},n.createElement("title",null,"External link"),n.createElement("use",{href:"#external"})),"See all transactions"))))}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d.apply(this,arguments)}function p(e){let{popover:t=!1,summaryMode:a=!1,balanceTypes:i}=e;const{balances:p,getBalances:u,transactions:f,getTransactions:b}=(0,n.useContext)(s.Z);return(0,n.useEffect)((()=>{u(i.map((e=>e.type)))}),[i]),(0,n.useEffect)((()=>{a||b(i.filter((e=>e.showRecentTransactions)).map((e=>e.type)))}),[a,i]),(0,c.j)(),n.createElement(l.N3,{className:"no-wysiwyg credits-wrapper"},i.map((e=>{if(t){const t=(0,r.Z)();return n.createElement(o.Z,{key:e.type,titleId:t,trigger:t=>{let{props:a,ref:r}=t;return n.createElement("button",d({ref:r},a,{type:"button",className:"credits-wrapper__action"}),n.createElement("svg",{className:"svg-icon"},n.createElement("title",null,"View ".concat(e.type," balance")),n.createElement("use",{href:"#".concat(e.icon)})))},className:"credits-popover"},n.createElement(m,d({popover:!0},e,{balances:p,transactions:f})))}return n.createElement(m,d({popover:!1,key:e.type},e,{balances:p,transactions:f}))})))}},2106:function(e,t,a){a.d(t,{Z:function(){return u}});a(33948);var n=a(67294),r=a(45697),c=a.n(r),l=a(98069),s=a(64663),o=a(34708),i=a(49641),m=a(26333);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d.apply(this,arguments)}const p=n.forwardRef(((e,t)=>{let{triggerRef:a,titleId:r,title:c,children:s,isOpen:p,onClose:u,className:f,...b}=e;const{overlayProps:g}=(0,l.Ir)({onClose:u,isOpen:p,isDismissable:!0,shouldCloseOnInteractOutside:e=>!(e.closest('[data-overlay-container]:not([aria-hidden="true"])')&&!e.closest('[aria-hidden="true"]'))&&(!!a.current.contains(e)||(u(),!1))},t),{modalProps:v}=(0,l.dd)(),{dialogProps:E,titleProps:_}=(0,o.R)({"aria-describedby":r},t);return n.createElement(i.MT,{contain:!0,restoreFocus:!0},n.createElement("div",d({},(0,m.dG)(g,E,b,v),{ref:t,className:"popover__dialog ".concat(f,"__dialog")}),r?"":n.createElement("h2",d({},_,{className:"popover__title ".concat(f,"__title")}),c),s,n.createElement(l.U4,{onDismiss:u})))}));function u(e){let{titleId:t,title:a,placement:r,trigger:c,className:o,children:i}=e;const[u,f]=(0,n.useState)(!1),b=n.useRef(),g=n.useRef(),{triggerProps:v,overlayProps:E}=(0,l.IB)({type:"dialog"},{isOpen:u},b),{overlayProps:_}=(0,l.tN)({targetRef:b,overlayRef:g,placement:r||"bottom right",offset:5,isOpen:u});delete _.style.zIndex;for(const[e,t]of Object.entries(_.style))_.style["--popover-".concat(e)]=isNaN(t)?t:"".concat(t,"px"),delete _.style[e];const{buttonProps:y}=(0,s.U)({onPress:()=>f(!0)},b),N=c({props:{...(0,m.dG)(y,v)},ref:b});return n.createElement(n.Fragment,null,N,u&&n.createElement(l.Xj,{className:"popover ".concat(o)},n.createElement(p,d({},E,_,{ref:g,triggerRef:b,titleId:t,title:a,isOpen:!0,onClose:()=>{f(!1)},className:o}),(0,n.cloneElement)(i,{closeModal:()=>f(!1)}))))}u.propTypes={titleId:c().string,title:c().string,trigger:c().func,className:c().string},u.defaultProps={titleId:"",title:"popover",trigger:e=>{let{props:t,ref:a}=e;return n.createElement("button",d({},t,{ref:a}),"Open popover")},className:"popover"}}}]);
//# sourceMappingURL=Credits-6205c24ff3eb622b844a.js.map